<!DOCTYPE html>

  <html>

  <head>
    <title>pet-detective</title>

    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/knockout-2.1.0.js"></script>
    <script src="js/underscore.min.js"></script>

    <style>
    body {
      font-family: calibri,arial;
    }

    </style>

  </head>

  <body>
    <h1>Pet Detective</h1>

    <div class="content">

      <table>
        <thead>
          <tr>
            <th>App</th>
            <th>Last Contact</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: list">
          <tr>
            <td data-bind="text: name"></td>
            <td data-bind="text: lastcontact"></td>
          </tr>
        </tbody>
      </table>

    </div>

    <script>

    function App( _name, _lastcontact ) {
      var self = this;

      self.name = ko.observable( _name );
      self.lastcontact = ko.observable( _lastcontact );
    }

    function ViewModel() {
      var self = this;

      self.list = ko.observableArray();
      self.add = function( name, lastcontact ) {
        var app = new App( name, lastcontact );
        self.list.push( app );
      }
    }

    var vm = new ViewModel();
    ko.applyBindings( vm );


    $.getJSON( 'lastcontact', function( _l ) {
      console.log( _l );
      _.each( _l, function(el) {
        vm.add( el.app_key, el.lastcontact );
      });
      console.log( vm.list() );
    });


    </script>
  </body>

  </html>
